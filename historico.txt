DIÁRIO DE BORDO V2 - PROJETO UKICEKER (ARQUITETURA HÍBRIDA)
Início da Nova Fase: 30/01/2026

--- OBJETIVO ESTRATÉGICO ---
Desenvolver uma plataforma de Afiliados (e futuro Dropshipping) de alta performance, abandonando o WordPress em favor de uma arquitetura proprietária para controle total e escalabilidade.

--- ARQUITETURA TÉCNICA (STACK) ---
1. **Frontend (Vitrine):** HTML5, CSS3 (Bootstrap 5), JavaScript. Servido por Nginx.
2. **Backend (Cérebro):** Python 3.10. Responsável por APIs, automação e conexão com banco.
3. **Banco de Dados:** MySQL 8.0.
4. **Infraestrutura:** Docker Compose.

--- NORMATIVA DE DESENVOLVIMENTO (A partir de 30/01/2026) ---
1. **Comentários Obrigatórios:** Todo arquivo deve iniciar com um cabeçalho descrevendo sua função. Blocos lógicos de código devem ser comentados.
2. **Nomenclatura:** Arquivos de template (moldes) devem ter o sufixo `_template` (ex: `index_template.html`) para não confundir com arquivos finais.
3. **Foco:** Qualquer nova funcionalidade deve ser validada contra o "Plano de Desenvolvimento" antes de ser iniciada.

--- SESSÃO (30/01/2026) - PREPARAÇÃO DO AMBIENTE ---
1. **Limpeza:** Remoção completa dos arquivos antigos do WordPress.
2. **Docker:** Configuração de `docker-compose.yml` com 4 serviços:
   - `db` (MySQL)
   - `backend` (Python 3.10)
   - `frontend` (Nginx)
   - `npm` (Proxy Manager)
3. **Próximos Passos:** Criar o arquivo `index.html` na pasta `frontend` e o primeiro script Python na pasta `backend`.

--- SESSÃO (30/01/2026) - FRONTEND INICIAL ---
- **Ação:** Arquivo `index.html` criado na pasta `frontend`.
- **Tecnologia:** Bootstrap 5 + Ícones + CSS Customizado.
- **Funcionalidade:** Estrutura de Abas (Tabs) implementada e Card de Produto modelo criado na aba Shopee.

--- RESOLUÇÃO DE PROBLEMAS (30/01/2026) - ARQUIVOS DE CONFIGURAÇÃO ---
- **Erro:** `no configuration file provided: not found` ao subir o Docker.
- **Causa:** O arquivo `docker-compose.yml` não foi encontrado na pasta (provavelmente deletado na limpeza e não recriado).
- **Ação:** Criação do arquivo `.env` com as credenciais do banco e instrução para garantir a existência do `docker-compose.yml`.
- **Correção:** Usuário confirmou que `.env` já existia. Arquivo `docker-compose.yml` recriado lendo as variáveis existentes.
- **Limpeza:** Remoção das credenciais do usuário "WordPress" do arquivo `.env`, mantendo apenas o acesso root para o novo banco de dados.
- **Ajuste Docker:** `docker-compose.yml` atualizado para remover variáveis obsoletas (`MYSQL_USER`) e injetar `DB_ROOT_PASSWORD` no container `backend`. Script `test_db.py` criado.

--- RESOLUÇÃO DE PROBLEMAS (30/01/2026) - EXECUÇÃO DE SCRIPTS ---
- **Erro:** `ModuleNotFoundError: No module named 'mysql'` ao rodar `test_db.py`.
- **Causa:** O usuário executou o script no ambiente Windows local (`C:\Python314\...`) em vez de dentro do container Docker.
- **Solução:** Instrução reforçada para usar `docker exec ukiceker_backend ...` para garantir acesso às bibliotecas e à rede interna (`host='db'`).

--- RESOLUÇÃO DE PROBLEMAS (30/01/2026) - CONEXÃO BANCO DE DADOS ---
- **Erro:** `Access denied for user 'root'... (using password: NO)` ao rodar script no container.
- **Causa:** O container `backend` não foi atualizado com a nova configuração do `docker-compose.yml` (variável `DB_ROOT_PASSWORD` ausente no ambiente).
- **Solução:** Executar `docker compose up -d` para recriar o container com as variáveis de ambiente corretas e reinstalar dependências.

--- RESOLUÇÃO DE PROBLEMAS (30/01/2026) - CRIAÇÃO DO BANCO ---
- **Erro:** `Unknown database 'ukiceker_db'` ao testar conexão.
- **Causa:** O MySQL não criou o banco automaticamente porque o volume de dados (`db_data`) já existia de instalações anteriores.
- **Solução:** Criação do script `setup_db.py` que conecta sem banco definido, cria o database `ukiceker_db` e a tabela `produtos` manualmente.

--- SESSÃO (30/01/2026) - POPULANDO O BANCO ---
- **Ação:** Criação do script `insert_test_products.py`.
- **Resultado:** Inserção de 3 produtos de teste na tabela `produtos` (Categoria Shopee) via script Python.

--- SESSÃO (30/01/2026) - GERAÇÃO DE SITE ESTÁTICO (SSR) ---
- **Infraestrutura:** Volume `./frontend` mapeado para o container backend.
- **Desenvolvimento:** Template Jinja2 criado em `backend/templates/index.html`. Script `gerar_site.py` implementado.
- **Resultado:** O Python agora lê o MySQL e gera o `index.html` final automaticamente. Integração Front/Back concluída.

--- SESSÃO (30/01/2026) - ORGANIZAÇÃO E VERSIONAMENTO ---
- **Documentação:** Separação do "Plano de Desenvolvimento" em arquivo próprio (`plano_desenvolvimento.txt`) para limpar o histórico.
- **Versionamento:** Execução de limpeza no Git para refletir a remoção do WordPress e a entrada da nova arquitetura Python/HTML.

--- RESOLUÇÃO DE PROBLEMAS (30/01/2026) - REINICIALIZAÇÃO DO GIT ---
- **Erro:** `fatal: not a git repository` ao tentar verificar status.
- **Causa:** A pasta oculta `.git` foi excluída durante a limpeza física dos arquivos do projeto.
- **Solução:** Reinicialização do repositório (`git init`), recriação do commit inicial e envio forçado (`--force`) para o GitHub para substituir o histórico antigo do WordPress.